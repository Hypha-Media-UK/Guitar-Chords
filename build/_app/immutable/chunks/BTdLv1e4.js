var G=Object.defineProperty;var k=t=>{throw TypeError(t)};var H=(t,e,s)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var B=(t,e,s)=>H(t,typeof e!="symbol"?e+"":e,s),N=(t,e,s)=>e.has(t)||k("Cannot "+s);var a=(t,e,s)=>(N(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),w=(t,e,s,r)=>(N(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{q as Y,v as $,w as I,x as J,y as x,z as F,h as O,A as K,B as Q,C as V,D as W,b as X,E as Z,F as j,H as ee,G as te,I as se,J as C,K as ae,L as re,P as ie,i as y,k as ne,M as fe,N as ce,O as de,Q as ue,R as _e,S as he,T as oe,a as le,l as ve,U as be,V as ge,W as Se,X as me,Y as Pe}from"./D45hmrUG.js";var h,o,_,P,p,R;class pe{constructor(e,s=!0){B(this,"anchor");v(this,h,new Map);v(this,o,new Map);v(this,_,new Map);v(this,P,!0);v(this,p,()=>{var e=Y;if(a(this,h).has(e)){var s=a(this,h).get(e),r=a(this,o).get(s);if(r)$(r);else{var f=a(this,_).get(s);f&&(a(this,o).set(s,f.effect),a(this,_).delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),r=f.effect)}for(const[c,n]of a(this,h)){if(a(this,h).delete(c),c===e)break;const i=a(this,_).get(n);i&&(I(i.effect),a(this,_).delete(n))}for(const[c,n]of a(this,o)){if(c===s)continue;const i=()=>{if(Array.from(a(this,h).values()).includes(c)){var l=document.createDocumentFragment();Q(n,l),l.append(x()),a(this,_).set(c,{effect:n,fragment:l})}else I(n);a(this,o).delete(c)};a(this,P)||!r?J(n,i,!1):i()}}});v(this,R,e=>{a(this,h).delete(e);const s=Array.from(a(this,h).values());for(const[r,f]of a(this,_))s.includes(r)||(I(f.effect),a(this,_).delete(r))});this.anchor=e,w(this,P,s)}ensure(e,s){var r=Y,f=V();if(s&&!a(this,o).has(e)&&!a(this,_).has(e))if(f){var c=document.createDocumentFragment(),n=x();c.append(n),a(this,_).set(e,{effect:F(()=>s(n)),fragment:c})}else a(this,o).set(e,F(()=>s(this.anchor)));if(a(this,h).set(r,e),f){for(const[i,d]of a(this,o))i===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[i,d]of a(this,_))i===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(a(this,p)),r.ondiscard(a(this,R))}else O&&(this.anchor=K),a(this,p).call(this)}}h=new WeakMap,o=new WeakMap,_=new WeakMap,P=new WeakMap,p=new WeakMap,R=new WeakMap;function Te(t,e,s=!1){O&&X();var r=new pe(t),f=s?Z:0;function c(n,i){if(O){const l=j(t)===ee;if(n===l){var d=te();se(d),r.anchor=d,C(!1),r.ensure(n,i),C(!0);return}}r.ensure(n,i)}W(()=>{var n=!1;e((i,d=!0)=>{n=!0,c(d,i)}),n||c(!1,null)},f)}let E=!1;function Ae(t){var e=E;try{return E=!1,[t(),E]}finally{E=e}}function Ie(t,e,s,r){var L;var f=!ve||(s&be)!==0,c=(s&oe)!==0,n=(s&Se)!==0,i=r,d=!0,l=()=>(d&&(d=!1,i=n?le(r):r),i),g;if(c){var U=me in t||Pe in t;g=((L=ae(t,e))==null?void 0:L.set)??(U&&e in t?u=>t[e]=u:void 0)}var S,D=!1;c?[S,D]=Ae(()=>t[e]):S=t[e],S===void 0&&r!==void 0&&(S=l(),g&&(f&&re(),g(S)));var b;if(f?b=()=>{var u=t[e];return u===void 0?l():(d=!0,u)}:b=()=>{var u=t[e];return u!==void 0&&(i=void 0),u===void 0?i:u},f&&!(s&ie))return b;if(g){var q=t.$$legacy;return function(u,A){return arguments.length>0?((!f||!A||q||D)&&g(A?b():u),u):b()}}var T=!1,m=(s&ge?ne:fe)(()=>(T=!1,b()));c&&y(m);var z=_e;return function(u,A){if(arguments.length>0){const M=A?y(m):f&&c?ce(u):u;return de(m,M),T=!0,i!==void 0&&(i=M),u}return ue&&T||z.f&he?m.v:y(m)}}export{pe as B,Te as i,Ie as p};
